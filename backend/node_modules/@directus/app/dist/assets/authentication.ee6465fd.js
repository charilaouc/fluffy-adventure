import{a as l,o as h,b as c,w as t,g as s,e as o,B as e}from"./runtime-core.esm-bundler.e3d5f5b7.js";const u={class:"markdown-body"},d=e("All data within the platform is private by default. The "),p=e("public role"),_=e(" can be configured to expose data without authentication, or you can pass an access token to the API to access private data."),g=s("hr",null,null,-1),f=s("h2",{id:"access-tokens",tabindex:"-1"},[s("a",{class:"header-anchor",href:"#access-tokens"},"#"),e(" Access Tokens")],-1),j=s("p",null,"There are two types of tokens that can be used to authenticate within Directus.",-1),b=s("p",null,[s("strong",null,"Temporary Token (JWT)"),e(" are returned by the "),s("a",{href:"#login"},"login"),e(" endpoint/mutation. These tokens have a relatively short expiration time, and are thus the most secure option to use. The tokens are returned with a "),s("code",null,"refresh_token"),e(" that can be used to retrieve a new access token via the "),s("a",{href:"#refresh"},"refresh"),e(" endpoint/mutation.")],-1),m=s("p",null,[s("strong",null,"Static Tokens"),e(" can be set for each platform user, and never expire. They are less secure, but quite useful for server-to-server communication. They are saved as plain-text within "),s("code",null,"directus_users.token"),e(".")],-1),k=s("p",null,[e("Once you have your access token, there are two ways to pass it to the API, via the "),s("code",null,"access_token"),e(" query parameter, or in the request\u2019s Authorization Header.")],-1),w=s("h3",{id:"query-parameter",tabindex:"-1"},[s("a",{class:"header-anchor",href:"#query-parameter"},"#"),e(" Query Parameter")],-1),y=s("pre",null,[s("code",null,`?access_token=<token>
`)],-1),q=s("h3",{id:"authorization-header",tabindex:"-1"},[s("a",{class:"header-anchor",href:"#authorization-header"},"#"),e(" Authorization Header")],-1),v=s("pre",null,[s("code",null,`Authorization: Bearer <token>
`)],-1),x=s("hr",null,null,-1),T=s("h2",{id:"login",tabindex:"-1"},[s("a",{class:"header-anchor",href:"#login"},"#"),e(" Login")],-1),P=s("p",null,"Retrieve a temporary access token and refresh token.",-1),S=s("h3",{id:"request-body",tabindex:"-1"},[s("a",{class:"header-anchor",href:"#request-body"},"#"),e(" Request Body")],-1),R=s("p",null,[s("code",null,"email"),e(),s("strong",null,"Required"),s("br"),e(" Email address of the user you\u2019re retrieving the access token for.")],-1),A=s("p",null,[s("code",null,"password"),e(),s("strong",null,"Required"),s("br"),e(" Password of the user.")],-1),O=s("p",null,[s("code",null,"otp"),s("br"),e(" The user\u2019s one-time-password (if MFA is enabled).")],-1),E=s("p",null,[s("code",null,"mode"),s("br"),e(" Whether to retrieve the refresh token in the JSON response, or in a "),s("code",null,"httpOnly"),e(),s("code",null,"secure"),e(" cookie. One of "),s("code",null,"json"),e(", "),s("code",null,"cookie"),e(". Defaults to "),s("code",null,"json"),e(".")],-1),L=s("h3",{id:"response-attributes",tabindex:"-1"},[s("a",{class:"header-anchor",href:"#response-attributes"},"#"),e(" Response Attributes")],-1),B=s("p",null,[s("code",null,"access_token"),e(),s("strong",null,"string"),s("br"),e(" Temporary access token to be used in follow-up requests.")],-1),I=s("p",null,[s("code",null,"expires"),e(),s("strong",null,"integer"),s("br"),e(" How long before the access token will expire. Value is in milliseconds.")],-1),N=s("p",null,[s("code",null,"refresh_token"),e(),s("strong",null,"string"),s("br"),e(" The token that can be used to retrieve a new access token through "),s("a",{href:"#refresh"},[s("code",null,"/auth/refresh")]),e(". Note: if you used "),s("code",null,"cookie"),e(" as the mode in the request, the refresh token won\u2019t be returned in the JSON.")],-1),G={class:"tip hint"},C=s("div",{class:"hint-title"},"Expiry time",-1),D=e("The token\u2019s expiration time can be configured through "),J=e("the "),W=s("code",null,"ACCESS_TOKEN_TTL",-1),Q=e(" environment variable"),z=e("."),H=s("h3",{id:"rest-api",tabindex:"-1"},[s("a",{class:"header-anchor",href:"#rest-api"},"#"),e(" REST API")],-1),V=s("pre",null,[s("code",null,`POST /auth/login
`)],-1),U=s("pre",null,[s("code",null,`POST /auth/login/:provider
`)],-1),K=s("pre",null,[s("code",{class:"language-json"},[s("span",{class:"hljs-punctuation"},"{"),e(`
	`),s("span",{class:"hljs-attr"},'"email"'),s("span",{class:"hljs-punctuation"},":"),e(),s("span",{class:"hljs-string"},'"admin@example.com"'),s("span",{class:"hljs-punctuation"},","),e(`
	`),s("span",{class:"hljs-attr"},'"password"'),s("span",{class:"hljs-punctuation"},":"),e(),s("span",{class:"hljs-string"},'"d1r3ct5us"'),e(`
`),s("span",{class:"hljs-punctuation"},"}"),e(`
`)])],-1),F=s("h3",{id:"graphql",tabindex:"-1"},[s("a",{class:"header-anchor",href:"#graphql"},"#"),e(" GraphQL")],-1),M=s("pre",null,[s("code",null,`POST /graphql/system
`)],-1),Y=s("pre",null,[s("code",{class:"language-graphql"},[s("span",{class:"hljs-keyword"},"mutation"),e(` {
	auth_login(email: `),s("span",{class:"hljs-string"},'"admin@example.com"'),e(", password: "),s("span",{class:"hljs-string"},'"d1r3ctu5"'),e(`) {
		access_token
		refresh_token
	}
}
`)])],-1),X=s("hr",null,null,-1),Z=s("h2",{id:"refresh",tabindex:"-1"},[s("a",{class:"header-anchor",href:"#refresh"},"#"),e(" Refresh")],-1),$=s("p",null,"Retrieve a new access token using a refresh token.",-1),ss=s("h3",{id:"request-body-1",tabindex:"-1"},[s("a",{class:"header-anchor",href:"#request-body-1"},"#"),e(" Request Body")],-1),es=s("p",null,[s("code",null,"refresh_token"),s("br"),e(" The refresh token to use. If you have the refresh token in a cookie through "),s("a",{href:"#login"},[s("code",null,"/auth/login")]),e(", you don\u2019t have to submit it here.")],-1),ts=s("p",null,[s("code",null,"mode"),s("br"),e(" Whether to retrieve the refresh token in the JSON response, or in a "),s("code",null,"httpOnly"),e(),s("code",null,"secure"),e(" cookie. One of "),s("code",null,"json"),e(", "),s("code",null,"cookie"),e(". Defaults to "),s("code",null,"json"),e(".")],-1),ns=s("h3",{id:"response-attributes-1",tabindex:"-1"},[s("a",{class:"header-anchor",href:"#response-attributes-1"},"#"),e(" Response Attributes")],-1),os=s("p",null,[s("code",null,"access_token"),e(),s("strong",null,"string"),s("br"),e(" Temporary access token to be used in follow-up requests.")],-1),as=s("p",null,[s("code",null,"expires"),e(),s("strong",null,"integer"),s("br"),e(" How long before the access token will expire. Value is in milliseconds.")],-1),ls=s("p",null,[s("code",null,"refresh_token"),e(),s("strong",null,"string"),s("br"),e(" The token that can be used to retrieve a new access token through "),s("a",{href:"#refresh"},[s("code",null,"/auth/refresh")]),e(". Note: if you used "),s("code",null,"cookie"),e(" as the mode in the request, the refresh token won\u2019t be returned in the JSON.")],-1),rs=s("h3",{id:"rest-api-1",tabindex:"-1"},[s("a",{class:"header-anchor",href:"#rest-api-1"},"#"),e(" REST API")],-1),is=s("pre",null,[s("code",null,`POST /auth/refresh
`)],-1),hs=s("pre",null,[s("code",{class:"language-json"},[s("span",{class:"hljs-punctuation"},"{"),e(`
	`),s("span",{class:"hljs-attr"},'"refresh_token"'),s("span",{class:"hljs-punctuation"},":"),e(),s("span",{class:"hljs-string"},'"gmPd...8wuB"'),e(`
`),s("span",{class:"hljs-punctuation"},"}"),e(`
`)])],-1),cs=s("h3",{id:"graphql-1",tabindex:"-1"},[s("a",{class:"header-anchor",href:"#graphql-1"},"#"),e(" GraphQL")],-1),us=s("pre",null,[s("code",null,`POST /graphql/system
`)],-1),ds=s("pre",null,[s("code",{class:"language-graphql"},[s("span",{class:"hljs-keyword"},"mutation"),e(` {
	auth_refresh(refresh_token: `),s("span",{class:"hljs-string"},'"abc...def"'),e(", mode: "),s("span",{class:"hljs-string"},'"json"'),e(`) {
		access_token
		refresh_token
	}
}
`)])],-1),ps=s("hr",null,null,-1),_s=s("h2",{id:"logout",tabindex:"-1"},[s("a",{class:"header-anchor",href:"#logout"},"#"),e(" Logout")],-1),gs=s("p",null,"Invalidate the refresh token thus destroying the user\u2019s session.",-1),fs=s("h3",{id:"request-body-2",tabindex:"-1"},[s("a",{class:"header-anchor",href:"#request-body-2"},"#"),e(" Request Body")],-1),js=s("p",null,[s("code",null,"refresh_token"),s("br"),e(" The refresh token to invalidate. If you have the refresh token in a cookie through "),s("a",{href:"#login"},[s("code",null,"/auth/login")]),e(", you don\u2019t have to submit it here.")],-1),bs=s("h3",{id:"rest-api-2",tabindex:"-1"},[s("a",{class:"header-anchor",href:"#rest-api-2"},"#"),e(" REST API")],-1),ms=s("pre",null,[s("code",null,`POST /auth/logout
`)],-1),ks=s("pre",null,[s("code",{class:"language-json"},[s("span",{class:"hljs-punctuation"},"{"),e(`
	`),s("span",{class:"hljs-attr"},'"refresh_token"'),s("span",{class:"hljs-punctuation"},":"),e(),s("span",{class:"hljs-string"},'"gmPd...8wuB"'),e(`
`),s("span",{class:"hljs-punctuation"},"}"),e(`
`)])],-1),ws=s("h3",{id:"graphql-2",tabindex:"-1"},[s("a",{class:"header-anchor",href:"#graphql-2"},"#"),e(" GraphQL")],-1),ys=s("pre",null,[s("code",null,`POST /graphql/system
`)],-1),qs=s("pre",null,[s("code",{class:"language-graphql"},[s("span",{class:"hljs-keyword"},"mutation"),e(` {
	auth_logout(refresh_token: `),s("span",{class:"hljs-string"},'"gmPd...8wuB"'),e(`)
}
`)])],-1),vs=s("hr",null,null,-1),xs=s("h2",{id:"request-password-reset",tabindex:"-1"},[s("a",{class:"header-anchor",href:"#request-password-reset"},"#"),e(" Request Password Reset")],-1),Ts=s("p",null,"Request a password reset email to be sent to the given user.",-1),Ps=s("h3",{id:"request-body-3",tabindex:"-1"},[s("a",{class:"header-anchor",href:"#request-body-3"},"#"),e(" Request Body")],-1),Ss=s("p",null,[s("code",null,"email"),e(),s("strong",null,"Required"),s("br"),e(" Email address of the user you\u2019re requesting a password reset for.")],-1),Rs=s("code",null,"reset_url",-1),As=s("br",null,null,-1),Os=e(" Provide a custom reset url which the link in the email will lead to. The reset token will be passed as a parameter."),Es=s("br",null,null,-1),Ls=s("strong",null,"Note",-1),Bs=e(": You need to configure the "),Is=s("code",null,"PASSWORD_RESET_URL_ALLOW_LIST",-1),Ns=e(" environment variable"),Gs=e(" to enable this feature."),Cs=s("h3",{id:"rest-api-3",tabindex:"-1"},[s("a",{class:"header-anchor",href:"#rest-api-3"},"#"),e(" REST API")],-1),Ds=s("pre",null,[s("code",null,`POST /auth/password/request
`)],-1),Js=s("pre",null,[s("code",{class:"language-json"},[s("span",{class:"hljs-punctuation"},"{"),e(`
	`),s("span",{class:"hljs-attr"},'"email"'),s("span",{class:"hljs-punctuation"},":"),e(),s("span",{class:"hljs-string"},'"admin@example.com"'),e(`
`),s("span",{class:"hljs-punctuation"},"}"),e(`
`)])],-1),Ws=s("h3",{id:"graphql-3",tabindex:"-1"},[s("a",{class:"header-anchor",href:"#graphql-3"},"#"),e(" GraphQL")],-1),Qs=s("pre",null,[s("code",null,`POST /graphql/system
`)],-1),zs=s("pre",null,[s("code",{class:"language-graphql"},[s("span",{class:"hljs-keyword"},"mutation"),e(` {
	auth_password_request(email: `),s("span",{class:"hljs-string"},'"admin@example.com"'),e(`)
}
`)])],-1),Hs=s("hr",null,null,-1),Vs=s("h2",{id:"reset-a-password",tabindex:"-1"},[s("a",{class:"header-anchor",href:"#reset-a-password"},"#"),e(" Reset a Password")],-1),Us=s("p",null,"The request a password reset endpoint sends an email with a link to the admin app (or a custom route) which in turn uses this endpoint to allow the user to reset their password.",-1),Ks=s("h3",{id:"request-body-4",tabindex:"-1"},[s("a",{class:"header-anchor",href:"#request-body-4"},"#"),e(" Request Body")],-1),Fs=s("p",null,[s("code",null,"token"),e(),s("strong",null,"Required"),s("br"),e(" Password reset token, as provided in the email sent by the request endpoint.")],-1),Ms=s("p",null,[s("code",null,"password"),e(),s("strong",null,"Required"),s("br"),e(" New password for the user.")],-1),Ys=s("h3",{id:"rest-api-4",tabindex:"-1"},[s("a",{class:"header-anchor",href:"#rest-api-4"},"#"),e(" REST API")],-1),Xs=s("pre",null,[s("code",null,`POST /auth/password/reset
`)],-1),Zs=s("pre",null,[s("code",{class:"language-json"},[s("span",{class:"hljs-punctuation"},"{"),e(`
	`),s("span",{class:"hljs-attr"},'"token"'),s("span",{class:"hljs-punctuation"},":"),e(),s("span",{class:"hljs-string"},'"eyJh...KmUk"'),s("span",{class:"hljs-punctuation"},","),e(`
	`),s("span",{class:"hljs-attr"},'"password"'),s("span",{class:"hljs-punctuation"},":"),e(),s("span",{class:"hljs-string"},'"d1r3ctu5"'),e(`
`),s("span",{class:"hljs-punctuation"},"}"),e(`
`)])],-1),$s=s("h3",{id:"graphql-4",tabindex:"-1"},[s("a",{class:"header-anchor",href:"#graphql-4"},"#"),e(" GraphQL")],-1),se=s("pre",null,[s("code",null,`POST /graphql/system
`)],-1),ee=s("pre",null,[s("code",{class:"language-graphql"},[s("span",{class:"hljs-keyword"},"mutation"),e(` {
	auth_password_reset(token: `),s("span",{class:"hljs-string"},'"eyJh...KmUk"'),e(", password: "),s("span",{class:"hljs-string"},'"d1r3ctu5"'),e(`)
}
`)])],-1),te=s("hr",null,null,-1),ne=s("h2",{id:"list-auth-providers",tabindex:"-1"},[s("a",{class:"header-anchor",href:"#list-auth-providers"},"#"),e(" List Auth Providers")],-1),oe=s("p",null,"List all the configured auth providers.",-1),ae={class:"tip hint"},le=s("div",{class:"hint-title"},"Configuring auth providers",-1),re=e("To learn more about setting up auth providers, see "),ie=e("Configuring auth providers"),he=e("."),ce=s("h3",{id:"response-attributes-2",tabindex:"-1"},[s("a",{class:"header-anchor",href:"#response-attributes-2"},"#"),e(" Response Attributes")],-1),ue=s("p",null,[s("code",null,"data"),e(),s("strong",null,"Array"),s("br"),e(" Array of configured auth providers.")],-1),de=s("p",null,[s("code",null,"disableDefault"),e(),s("strong",null,"boolean"),s("br"),e(" Whether or not the default authentication provider is disabled.")],-1),pe=s("pre",null,[s("code",null,`GET /auth
`)],-1),_e=s("pre",null,[s("code",{class:"language-json"},[s("span",{class:"hljs-punctuation"},"{"),e(`
	`),s("span",{class:"hljs-attr"},'"data"'),s("span",{class:"hljs-punctuation"},":"),e(),s("span",{class:"hljs-punctuation"},"["),e(`
		`),s("span",{class:"hljs-punctuation"},"{"),e(`
			`),s("span",{class:"hljs-attr"},'"name"'),s("span",{class:"hljs-punctuation"},":"),e(),s("span",{class:"hljs-string"},'"GitHub"'),s("span",{class:"hljs-punctuation"},","),e(`
			`),s("span",{class:"hljs-attr"},'"driver"'),s("span",{class:"hljs-punctuation"},":"),e(),s("span",{class:"hljs-string"},'"oauth2"'),s("span",{class:"hljs-punctuation"},","),e(`
			`),s("span",{class:"hljs-attr"},'"icon"'),s("span",{class:"hljs-punctuation"},":"),e(),s("span",{class:"hljs-string"},'"github"'),e(`
		`),s("span",{class:"hljs-punctuation"},"}"),s("span",{class:"hljs-punctuation"},","),e(`
		`),s("span",{class:"hljs-punctuation"},"{"),e(`
			`),s("span",{class:"hljs-attr"},'"name"'),s("span",{class:"hljs-punctuation"},":"),e(),s("span",{class:"hljs-string"},'"Google"'),s("span",{class:"hljs-punctuation"},","),e(`
			`),s("span",{class:"hljs-attr"},'"driver"'),s("span",{class:"hljs-punctuation"},":"),e(),s("span",{class:"hljs-string"},'"openid"'),s("span",{class:"hljs-punctuation"},","),e(`
			`),s("span",{class:"hljs-attr"},'"icon"'),s("span",{class:"hljs-punctuation"},":"),e(),s("span",{class:"hljs-string"},'"google"'),e(`
		`),s("span",{class:"hljs-punctuation"},"}"),s("span",{class:"hljs-punctuation"},","),e(`
		`),s("span",{class:"hljs-punctuation"},"{"),e(`
			`),s("span",{class:"hljs-attr"},'"name"'),s("span",{class:"hljs-punctuation"},":"),e(),s("span",{class:"hljs-string"},'"Okta"'),s("span",{class:"hljs-punctuation"},","),e(`
			`),s("span",{class:"hljs-attr"},'"driver"'),s("span",{class:"hljs-punctuation"},":"),e(),s("span",{class:"hljs-string"},'"openid"'),e(`
		`),s("span",{class:"hljs-punctuation"},"}"),e(`
	`),s("span",{class:"hljs-punctuation"},"]"),s("span",{class:"hljs-punctuation"},","),e(`
	`),s("span",{class:"hljs-attr"},'"disableDefault"'),s("span",{class:"hljs-punctuation"},":"),e(),s("span",{class:"hljs-literal"},[s("span",{class:"hljs-keyword"},"false")]),e(`
`),s("span",{class:"hljs-punctuation"},"}"),e(`
`)])],-1),ge=s("hr",null,null,-1),fe=s("h2",{id:"login-using-sso-providers",tabindex:"-1"},[s("a",{class:"header-anchor",href:"#login-using-sso-providers"},"#"),e(" Login Using SSO Providers")],-1),je=s("p",null,"Will redirect to the configured SSO provider for the user to login.",-1),be=s("pre",null,[s("code",null,`GET /auth/login/:provider
`)],-1),me=s("hr",null,null,-1),ve="Authentication",xe=!1,Te="API documentation on authentication in Directus.",Pe="5 min read",Se="page-reference",Re={name:"authentication",setup(ke,{expose:r}){const a={title:"Authentication",modularExtension:!1,description:"API documentation on authentication in Directus.",readTime:"5 min read",pageClass:"page-reference"};return r({frontmatter:a}),(we,ye)=>{const n=l("router-link"),i=l("docs-wrapper");return h(),c(i,{frontmatter:a},{default:t(()=>[s("div",u,[s("blockquote",null,[s("p",null,[d,o(n,{to:"/docs/configuration/users-roles-permissions#configure-permissions"},{default:t(()=>[p]),_:1}),_])]),g,f,j,b,m,k,w,y,q,v,x,T,P,S,R,A,O,E,L,B,I,N,s("div",G,[C,s("p",null,[D,o(n,{to:"/docs/self-hosted/config-options#general"},{default:t(()=>[J,W,Q]),_:1}),z])]),H,V,U,K,F,M,Y,X,Z,$,ss,es,ts,ns,os,as,ls,rs,is,hs,cs,us,ds,ps,_s,gs,fs,js,bs,ms,ks,ws,ys,qs,vs,xs,Ts,Ps,Ss,s("p",null,[Rs,As,Os,Es,Ls,Bs,o(n,{to:"/docs/self-hosted/config-options#security"},{default:t(()=>[Is,Ns]),_:1}),Gs]),Cs,Ds,Js,Ws,Qs,zs,Hs,Vs,Us,Ks,Fs,Ms,Ys,Xs,Zs,$s,se,ee,te,ne,oe,s("div",ae,[le,s("p",null,[re,o(n,{to:"/docs/self-hosted/config-options#authentication"},{default:t(()=>[ie]),_:1}),he])]),ce,ue,de,pe,_e,ge,fe,je,be,me])]),_:1})}}};export{Re as default,Te as description,xe as modularExtension,Se as pageClass,Pe as readTime,ve as title};
